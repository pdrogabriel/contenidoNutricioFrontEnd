<!--
    Directora del proyecto: Sabina López Toledo                               
    Coordinadora y Desarrolladora: Silviana Juárez Chalini                    
    Desarrollador: Rolando Pedro Gabriel                                      
    Fecha de Creación: 22/04/2022                                              
    Fecha de Actualización: 12/07/2023                                         
-->

<!-- Page Content-->
<div class="container px-4 px-lg-5">
    <!-- Heading Row-->
    <div class="row gx-4 gx-lg-5 align-items-center my-5">
        <!-- Login -->
        <div class="col-lg-12">
            <!-- Section: Design Block -->
            <section class="">
                <!-- Jumbotron -->
                <div class="px-4 py-5 px-md-1 text-center text-lg-start" style="background-color: hsl(0, 0%, 96%)">
                    <div class="container">
                        <div class="row gx-lg-5 align-items-center">
                            <h1>Administraci&oacute;n de usuarios</h1>
                            <!--======================================= Agregamos los datos de la tabla ============================================-->
                            <table class="table table-striped table-bordered table-sm row-border hover"
                                id="datatableexample">
                                <thead class="thead-light">
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Apellido paterno</th>
                                        <th>Apellido materno</th>
                                        <th>Institución</th>
                                        <th>Email</th>
                                        <th>Tipo de cuenta</th>
                                        <th>Estatus</th>
                                        <th>Eliminar</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let usuario of listaUsuario">
                                        <td>{{usuario.nombre}}</td>
                                        <td>{{usuario.apellidoPaterno}}</td>
                                        <td>{{usuario.apellidoMaterno}}</td>
                                        <td>{{usuario.institucion}}</td>
                                        <td>{{usuario.email}}</td>
                                        <td> 
                                            <button
                                                class='{{usuario.roles[0].name == "ROLE_USER" ? "btn btn-warning" : "btn btn-info"}}'
                                                title='{{usuario.roles[0].name == "ROLE_USER" ? "Click para cambiar a Administrador" : "Clik para cambiar a Invitado"}}'
                                                (click)="cambiarRolUsuario(usuario)">
                                                {{usuario.roles[0].name == "ROLE_USER" ? "Invitado" : "Administrador"}}
                                            </button>
                                        </td>
                                        <td> 
                                            <button
                                                class='{{usuario.acceso == 1 ? "btn btn-success" : "btn btn-secondary"}}'
                                                title='{{usuario.acceso == 1 ? "Click para desactivar" : "Clik para activar"}}'
                                                (click)="updateUsuario(usuario)">
                                                {{usuario.acceso == 1 ? "Inactivar" : "Activar"}}
                                            </button>
                                        </td>
                                        <td> <button class="btn btn-danger" (click)="deleteUsuario(usuario.id)">
                                                Eliminar
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Jumbotron -->
            </section>
            <!-- Section: Design Block -->
        </div>
        <!-- Termina el Login -->
    </div>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</div>